/*global defineSuite*/
defineSuite([
         'Scene/MeanSeaLevelTerrainProvider',
         'Core/Math'
     ], function(
         MeanSeaLevelTerrainProvider,
         CesiumMath) {
    "use strict";
    /*global jasmine,describe,xdescribe,it,xit,expect,beforeEach,afterEach,beforeAll,afterAll,spyOn,runs,waits,waitsFor*/


    it('tests constructor', function() {
        var mslProvider = new MeanSeaLevelTerrainProvider({
            url : 'Data/WW15MGH.DAC'
        });

        waitsFor(function() {
            return mslProvider.ready;
        });

        var numRows = 721;
        var numCols = 1441;

        runs(function() {
            expect(mslProvider._posts.length).toBe(numRows);

            var row = 0;
            for (; row < numRows; row++){
                expect(mslProvider._posts[row].length).toBe(numCols);

                // Make sure the identical points (due to globe wrap around) are equal
                expect(mslProvider._posts[row][0]).toBe(mslProvider._posts[row][numCols - 1]);
            }

            // And test a handful of known values (from examination of file loaded in STK Components).
            // Note that these values are in cm, it is the HeightMapTerrainData later on that
            // converts them to meters.
            expect(mslProvider._posts[0][0]).toBe(-2953);
            expect(mslProvider._posts[720][0]).toBe(1361);
            expect(mslProvider._posts[720][1440]).toBe(1361);
            expect(mslProvider._posts[360][0]).toBe(2115);
            expect(mslProvider._posts[360][300]).toBe(-1756);
            expect(mslProvider._posts[360][600]).toBe(216);
            expect(mslProvider._posts[360][900]).toBe(-4337);
            expect(mslProvider._posts[360][1200]).toBe(5835);
        });

    });

    it('tests interpolator', function() {
        var mslProvider = new MeanSeaLevelTerrainProvider({
            url : 'Data/WW15MGH.DAC'
        });

        waitsFor(function() {
            return mslProvider.ready;
        });

        var correct = [];
        correct.push([-3.14159265358979, -1.5707963267949, -29.53]);
        correct.push([-2.51327412287183, -1.5707963267949, -29.53]);
        correct.push([-1.88495559215388, -1.5707963267949, -29.53]);
        correct.push([-1.25663706143592, -1.5707963267949, -29.53]);
        correct.push([-0.628318530717959, -1.5707963267949, -29.53]);
        correct.push([0, -1.5707963267949, -29.53]);
        correct.push([0.628318530717959, -1.5707963267949, -29.53]);
        correct.push([1.25663706143592, -1.5707963267949, -29.53]);
        correct.push([1.88495559215388, -1.5707963267949, -29.53]);
        correct.push([2.51327412287183, -1.5707963267949, -29.53]);
        correct.push([3.14159265358979, -1.5707963267949, -29.53]);
        correct.push([-3.14159265358979, -1.48588841723842, -35.6394594594595]);
        correct.push([-2.51327412287183, -1.48588841723842, -40.1389189189189]);
        correct.push([-1.88495559215388, -1.48588841723842, -32.1697297297297]);
        correct.push([-1.25663706143592, -1.48588841723842, -25.6718918918919]);
        correct.push([-0.628318530717959, -1.48588841723842, -17.0237837837838]);
        correct.push([0, -1.48588841723842, -15.5494594594595]);
        correct.push([0.628318530717959, -1.48588841723842, -10.1621621621622]);
        correct.push([1.25663706143592, -1.48588841723842, -12.0191891891892]);
        correct.push([1.88495559215388, -1.48588841723842, -25.472972972973]);
        correct.push([2.51327412287183, -1.48588841723842, -36.4724324324324]);
        correct.push([3.14159265358979, -1.48588841723842, -35.6394594594595]);
        correct.push([-3.14159265358979, -1.40098050768193, -51.825945945946]);
        correct.push([-2.51327412287183, -1.40098050768193, -48.9832432432432]);
        correct.push([-1.88495559215388, -1.40098050768193, -35.4997297297297]);
        correct.push([-1.25663706143592, -1.40098050768193, -23.5297297297297]);
        correct.push([-0.628318530717959, -1.40098050768193, -17.7735135135135]);
        correct.push([0, -1.40098050768193, -7.46729729729729]);
        correct.push([0.628318530717959, -1.40098050768193, 1.92405405405406]);
        correct.push([1.25663706143592, -1.40098050768193, 4.96108108108108]);
        correct.push([1.88495559215388, -1.40098050768193, -21.8867567567568]);
        correct.push([2.51327412287183, -1.40098050768193, -48.9194594594595]);
        correct.push([3.14159265358979, -1.40098050768193, -51.825945945946]);
        correct.push([-3.14159265358979, -1.31607259812545, -61.1497297297297]);
        correct.push([-2.51327412287183, -1.31607259812545, -51.4435135135135]);
        correct.push([-1.88495559215388, -1.31607259812545, -28.9727027027027]);
        correct.push([-1.25663706143592, -1.31607259812545, -10.9135135135136]);
        correct.push([-0.628318530717959, -1.31607259812545, -4.44621621621625]);
        correct.push([0, -1.31607259812545, 8.71513513513512]);
        correct.push([0.628318530717959, -1.31607259812545, 14.4935135135135]);
        correct.push([1.25663706143592, -1.31607259812545, 7.47945945945945]);
        correct.push([1.88495559215388, -1.31607259812545, -20.6427027027027]);
        correct.push([2.51327412287183, -1.31607259812545, -55.0367567567568]);
        correct.push([3.14159265358979, -1.31607259812545, -61.1497297297297]);
        correct.push([-3.14159265358979, -1.23116468856897, -61.0867567567567]);
        correct.push([-2.51327412287183, -1.23116468856897, -54.9132432432433]);
        correct.push([-1.88495559215388, -1.23116468856897, -32.6881081081081]);
        correct.push([-1.25663706143592, -1.23116468856897, -1.72270270270271]);
        correct.push([-0.628318530717959, -1.23116468856897, 1.4935135135135]);
        correct.push([0, -1.23116468856897, 14.3789189189189]);
        correct.push([0.628318530717959, -1.23116468856897, 20.8664864864865]);
        correct.push([1.25663706143592, -1.23116468856897, 16.6708108108108]);
        correct.push([1.88495559215388, -1.23116468856897, -16.7413513513514]);
        correct.push([2.51327412287183, -1.23116468856897, -51.0497297297297]);
        correct.push([3.14159265358979, -1.23116468856897, -61.0867567567567]);
        correct.push([-3.14159265358979, -1.14625677901249, -53.4508108108108]);
        correct.push([-2.51327412287183, -1.14625677901249, -44.3735135135135]);
        correct.push([-1.88495559215388, -1.14625677901249, -26.7505405405405]);
        correct.push([-1.25663706143592, -1.14625677901249, 2.72405405405405]);
        correct.push([-0.628318530717959, -1.14625677901249, 11.97]);
        correct.push([0, -1.14625677901249, 13.2075675675676]);
        correct.push([0.628318530717959, -1.14625677901249, 23.5945945945946]);
        correct.push([1.25663706143592, -1.14625677901249, 21.0708108108108]);
        correct.push([1.88495559215388, -1.14625677901249, -12.457027027027]);
        correct.push([2.51327412287183, -1.14625677901249, -45.2408108108108]);
        correct.push([3.14159265358979, -1.14625677901249, -53.4508108108108]);
        correct.push([-3.14159265358979, -1.06134886945601, -47.3497297297298]);
        correct.push([-2.51327412287183, -1.06134886945601, -33.0727027027027]);
        correct.push([-1.88495559215388, -1.06134886945601, -22.0502702702703]);
        correct.push([-1.25663706143592, -1.06134886945601, 6.68567567567567]);
        correct.push([-0.628318530717959, -1.06134886945601, 21.2024324324324]);
        correct.push([0, -1.06134886945601, 14.5721621621621]);
        correct.push([0.628318530717959, -1.06134886945601, 30.91]);
        correct.push([1.25663706143592, -1.06134886945601, 27.0010810810811]);
        correct.push([1.88495559215388, -1.06134886945601, -12.2718918918919]);
        correct.push([2.51327412287183, -1.06134886945601, -33.6951351351352]);
        correct.push([3.14159265358979, -1.06134886945601, -47.3497297297298]);
        correct.push([-3.14159265358979, -0.976440959899531, -37.0056756756757]);
        correct.push([-2.51327412287183, -0.976440959899531, -22.9670270270271]);
        correct.push([-1.88495559215388, -0.976440959899531, -14.4002702702703]);
        correct.push([-1.25663706143592, -0.976440959899531, 4.30648648648648]);
        correct.push([-0.628318530717959, -0.976440959899531, 19.4878378378378]);
        correct.push([0, -0.976440959899531, 24.5078378378378]);
        correct.push([0.628318530717959, -0.976440959899531, 38.3386486486486]);
        correct.push([1.25663706143592, -0.976440959899531, 33.4256756756757]);
        correct.push([1.88495559215388, -0.976440959899531, -9.72351351351352]);
        correct.push([2.51327412287183, -0.976440959899531, -22.6662162162162]);
        correct.push([3.14159265358979, -0.976440959899531, -37.0056756756757]);
        correct.push([-3.14159265358979, -0.89153305034305, -21.3243243243244]);
        correct.push([-2.51327412287183, -0.89153305034305, -17.8651351351352]);
        correct.push([-1.88495559215388, -0.89153305034305, -10.8410810810811]);
        correct.push([-1.25663706143592, -0.89153305034305, 12.4608108108108]);
        correct.push([-0.628318530717959, -0.89153305034305, 7.81378378378382]);
        correct.push([0, -0.89153305034305, 26.4424324324324]);
        correct.push([0.628318530717959, -0.89153305034305, 42.0935135135135]);
        correct.push([1.25663706143592, -0.89153305034305, 38.0083783783784]);
        correct.push([1.88495559215388, -0.89153305034305, -11.8921621621621]);
        correct.push([2.51327412287183, -0.89153305034305, -17.8091891891892]);
        correct.push([3.14159265358979, -0.89153305034305, -21.3243243243244]);
        correct.push([-3.14159265358979, -0.806625140786569, -2.87135135135143]);
        correct.push([-2.51327412287183, -0.806625140786569, -14.5872972972973]);
        correct.push([-1.88495559215388, -0.806625140786569, -9.4872972972973]);
        correct.push([-1.25663706143592, -0.806625140786569, 23.7254054054054]);
        correct.push([-0.628318530717959, -0.806625140786569, -1.92837837837836]);
        correct.push([0, -0.806625140786569, 22.3156756756757]);
        correct.push([0.628318530717959, -0.806625140786569, 45.844054054054]);
        correct.push([1.25663706143592, -0.806625140786569, 31.4972972972973]);
        correct.push([1.88495559215388, -0.806625140786569, -18.6494594594594]);
        correct.push([2.51327412287183, -0.806625140786569, -15.5532432432432]);
        correct.push([3.14159265358979, -0.806625140786569, -2.87135135135141]);
        correct.push([-3.14159265358979, -0.721717231230088, 17.8416216216216]);
        correct.push([-2.51327412287183, -0.721717231230088, -11.2186486486487]);
        correct.push([-1.88495559215388, -0.721717231230088, -9.81]);
        correct.push([-1.25663706143592, -0.721717231230088, 20.9256756756756]);
        correct.push([-0.628318530717959, -0.721717231230088, -3.28162162162162]);
        correct.push([0, -0.721717231230088, 17.6248648648649]);
        correct.push([0.628318530717959, -0.721717231230088, 36.6948648648649]);
        correct.push([1.25663706143592, -0.721717231230088, 22.9102702702703]);
        correct.push([1.88495559215388, -0.721717231230088, -28.5594594594594]);
        correct.push([2.51327412287183, -0.721717231230088, -8.15054054054064]);
        correct.push([3.14159265358979, -0.721717231230088, 17.8416216216216]);
        correct.push([-3.14159265358979, -0.636809321673607, 21.0535135135134]);
        correct.push([-2.51327412287183, -0.636809321673607, -8.8145945945946]);
        correct.push([-1.88495559215388, -0.636809321673607, -9.74621621621622]);
        correct.push([-1.25663706143592, -0.636809321673607, 20.8105405405405]);
        correct.push([-0.628318530717959, -0.636809321673607, -4.08054054054054]);
        correct.push([0, -0.636809321673607, 16.7532432432432]);
        correct.push([0.628318530717959, -0.636809321673607, 27.7805405405406]);
        correct.push([1.25663706143592, -0.636809321673607, 15.0005405405406]);
        correct.push([1.88495559215388, -0.636809321673607, -37.9994594594594]);
        correct.push([2.51327412287183, -0.636809321673607, 5.83567567567565]);
        correct.push([3.14159265358979, -0.636809321673607, 21.0535135135136]);
        correct.push([-3.14159265358979, -0.551901412117126, 44.9116216216216]);
        correct.push([-2.51327412287183, -0.551901412117126, -8.04810810810812]);
        correct.push([-1.88495559215388, -0.551901412117126, -8.30837837837839]);
        correct.push([-1.25663706143592, -0.551901412117126, 15.5802702702702]);
        correct.push([-0.628318530717959, -0.551901412117126, -1.63702702702705]);
        correct.push([0, -0.551901412117126, 19.5502702702703]);
        correct.push([0.628318530717959, -0.551901412117126, 23.1743243243244]);
        correct.push([1.25663706143592, -0.551901412117126, 6.89783783783789]);
        correct.push([1.88495559215388, -0.551901412117126, -40.6083783783784]);
        correct.push([2.51327412287183, -0.551901412117126, 14.3518918918918]);
        correct.push([3.14159265358979, -0.551901412117126, 44.9116216216216]);
        correct.push([-3.14159265358979, -0.466993502560645, 48.2545945945946]);
        correct.push([-2.51327412287183, -0.466993502560645, -5.7259459459459]);
        correct.push([-1.88495559215388, -0.466993502560645, -4.66297297297298]);
        correct.push([-1.25663706143592, -0.466993502560645, 13.7297297297297]);
        correct.push([-0.628318530717959, -0.466993502560645, -6.97081081081078]);
        correct.push([0, -0.466993502560645, 20.5016216216216]);
        correct.push([0.628318530717959, -0.466993502560645, 12.0813513513514]);
        correct.push([1.25663706143592, -0.466993502560645, -2.944054054054]);
        correct.push([1.88495559215388, -0.466993502560645, -37.7343243243243]);
        correct.push([2.51327412287183, -0.466993502560645, 26.8694594594594]);
        correct.push([3.14159265358979, -0.466993502560645, 48.2545945945946]);
        correct.push([-3.14159265358979, -0.382085593004164, 50.4267567567568]);
        correct.push([-2.51327412287183, -0.382085593004164, -7.75]);
        correct.push([-1.88495559215388, -0.382085593004164, -3.17837837837838]);
        correct.push([-1.25663706143592, -0.382085593004164, 19.6556756756756]);
        correct.push([-0.628318530717959, -0.382085593004164, -9.66270270270266]);
        correct.push([0, -0.382085593004164, 17.2924324324324]);
        correct.push([0.628318530717959, -0.382085593004164, -0.958378378378246]);
        correct.push([1.25663706143592, -0.382085593004164, -18.2662162162161]);
        correct.push([1.88495559215388, -0.382085593004164, -31.1316216216216]);
        correct.push([2.51327412287183, -0.382085593004164, 43.6745945945945]);
        correct.push([3.14159265358979, -0.382085593004164, 50.4267567567568]);
        correct.push([-3.14159265358979, -0.297177683447684, 51.3370270270269]);
        correct.push([-2.51327412287183, -0.297177683447684, -3.37513513513524]);
        correct.push([-1.88495559215388, -0.297177683447684, -2.68135135135134]);
        correct.push([-1.25663706143592, -0.297177683447684, 29.9913513513509]);
        correct.push([-0.628318530717959, -0.297177683447684, -9.81675675675666]);
        correct.push([0, -0.297177683447684, 14.7316216216216]);
        correct.push([0.628318530717959, -0.297177683447684, -11.4424324324324]);
        correct.push([1.25663706143592, -0.297177683447684, -37.7435135135134]);
        correct.push([1.88495559215388, -0.297177683447684, -25.1181081081082]);
        correct.push([2.51327412287183, -0.297177683447684, 58.4748648648648]);
        correct.push([3.14159265358979, -0.297177683447684, 51.337027027027]);
        correct.push([-3.14159265358979, -0.212269773891203, 42.7032432432432]);
        correct.push([-2.51327412287183, -0.212269773891203, -3.80297297297301]);
        correct.push([-1.88495559215388, -0.212269773891203, -5.89540540540538]);
        correct.push([-1.25663706143592, -0.212269773891203, 32.3835135135137]);
        correct.push([-0.628318530717959, -0.212269773891203, -12.4616216216216]);
        correct.push([0, -0.212269773891203, 11.3251351351352]);
        correct.push([0.628318530717959, -0.212269773891203, -18.9902702702703]);
        correct.push([1.25663706143592, -0.212269773891203, -57.6186486486486]);
        correct.push([1.88495559215388, -0.212269773891203, -7.01594594594602]);
        correct.push([2.51327412287183, -0.212269773891203, 67.1502702702701]);
        correct.push([3.14159265358979, -0.212269773891203, 42.7032432432432]);
        correct.push([-3.14159265358979, -0.127361864334722, 27.3683783783784]);
        correct.push([-2.51327412287183, -0.127361864334722, 2.57270270270268]);
        correct.push([-1.88495559215388, -0.127361864334722, -11.1694594594594]);
        correct.push([-1.25663706143592, -0.127361864334722, 23.4427027027027]);
        correct.push([-0.628318530717959, -0.127361864334722, -4.15243243243246]);
        correct.push([0, -0.127361864334722, 14.2959459459459]);
        correct.push([0.628318530717959, -0.127361864334722, -19.4475675675675]);
        correct.push([1.25663706143592, -0.127361864334722, -73.4156756756756]);
        correct.push([1.88495559215388, -0.127361864334722, 21.5537837837837]);
        correct.push([2.51327412287183, -0.127361864334722, 76.2348648648648]);
        correct.push([3.14159265358979, -0.127361864334722, 27.3683783783785]);
        correct.push([-3.14159265358979, -0.0424539547782409, 22.4327027027027]);
        correct.push([-2.51327412287183, -0.0424539547782409, 6.22135135135133]);
        correct.push([-1.88495559215388, -0.0424539547782409, -16.9929729729729]);
        correct.push([-1.25663706143592, -0.0424539547782409, 17.6210810810811]);
        correct.push([-0.628318530717959, -0.0424539547782409, -11.1908108108108]);
        correct.push([0, -0.0424539547782409, 18.2]);
        correct.push([0.628318530717959, -0.0424539547782409, -19.5054054054054]);
        correct.push([1.25663706143592, -0.0424539547782409, -90.3432432432432]);
        correct.push([1.88495559215388, -0.0424539547782409, 25.6216216216216]);
        correct.push([2.51327412287183, -0.0424539547782409, 78.2437837837838]);
        correct.push([3.14159265358979, -0.0424539547782409, 22.4327027027028]);
        correct.push([-3.14159265358979, 0.04245395477824, 19.3618918918919]);
        correct.push([-2.51327412287183, 0.04245395477824, 4.52567567567571]);
        correct.push([-1.88495559215388, 0.04245395477824, -21.3405405405405]);
        correct.push([-1.25663706143592, 0.04245395477824, 14.740810810811]);
        correct.push([-0.628318530717959, 0.04245395477824, -7.09459459459463]);
        correct.push([0, 0.04245395477824, 16.6324324324324]);
        correct.push([0.628318530717959, 0.04245395477824, -16.3697297297297]);
        correct.push([1.25663706143592, 0.04245395477824, -97.1413513513513]);
        correct.push([1.88495559215388, 0.04245395477824, 22.2162162162163]);
        correct.push([2.51327412287183, 0.04245395477824, 66.18]);
        correct.push([3.14159265358979, 0.04245395477824, 19.3618918918919]);
        correct.push([-3.14159265358979, 0.127361864334721, 15.3545945945946]);
        correct.push([-2.51327412287183, 0.127361864334721, -1.78864864864861]);
        correct.push([-1.88495559215388, 0.127361864334721, -24.7327027027027]);
        correct.push([-1.25663706143592, 0.127361864334721, 0.55972972972985]);
        correct.push([-0.628318530717959, 0.127361864334721, -7.10810810810811]);
        correct.push([0, 0.127361864334721, 26.4764864864865]);
        correct.push([0.628318530717959, 0.127361864334721, -9.89540540540552]);
        correct.push([1.25663706143592, 0.127361864334721, -96.6135135135135]);
        correct.push([1.88495559215388, 0.127361864334721, 9.80594594594607]);
        correct.push([2.51327412287183, 0.127361864334721, 61.6608108108109]);
        correct.push([3.14159265358979, 0.127361864334721, 15.3545945945946]);
        correct.push([-3.14159265358979, 0.212269773891202, 10.5505405405406]);
        correct.push([-2.51327412287183, 0.212269773891202, -7.66567567567565]);
        correct.push([-1.88495559215388, 0.212269773891202, -27.0737837837838]);
        correct.push([-1.25663706143592, 0.212269773891202, -16.933243243243]);
        correct.push([-0.628318530717959, 0.212269773891202, -10.9478378378378]);
        correct.push([0, 0.212269773891202, 24.387027027027]);
        correct.push([0.628318530717959, 0.212269773891202, -3.8094594594595]);
        correct.push([1.25663706143592, 0.212269773891202, -89.2986486486487]);
        correct.push([1.88495559215388, 0.212269773891202, 0.852702702702767]);
        correct.push([2.51327412287183, 0.212269773891202, 41.2797297297292]);
        correct.push([3.14159265358979, 0.212269773891202, 10.5505405405406]);
        correct.push([-3.14159265358979, 0.297177683447683, 6.8737837837838]);
        correct.push([-2.51327412287183, 0.297177683447683, -13.6991891891892]);
        correct.push([-1.88495559215388, 0.297177683447683, -29.6018918918919]);
        correct.push([-1.25663706143592, 0.297177683447683, -30.2429729729728]);
        correct.push([-0.628318530717959, 0.297177683447683, -4.07270270270272]);
        correct.push([0, 0.297177683447683, 27.1735135135135]);
        correct.push([0.628318530717959, 0.297177683447683, 2.13864864864861]);
        correct.push([1.25663706143592, 0.297177683447683, -75.3929729729731]);
        correct.push([1.88495559215388, 0.297177683447683, -14.5956756756756]);
        correct.push([2.51327412287183, 0.297177683447683, 52.5567567567568]);
        correct.push([3.14159265358979, 0.297177683447683, 6.8737837837838]);
        correct.push([-3.14159265358979, 0.382085593004164, 1.54000000000005]);
        correct.push([-2.51327412287183, 0.382085593004164, -17.8310810810811]);
        correct.push([-1.88495559215388, 0.382085593004164, -30.9954054054054]);
        correct.push([-1.25663706143592, 0.382085593004164, -41.9289189189186]);
        correct.push([-0.628318530717959, 0.382085593004164, 2.50378378378371]);
        correct.push([0, 0.382085593004164, 30.4645945945946]);
        correct.push([0.628318530717959, 0.382085593004164, 8.37513513513511]);
        correct.push([1.25663706143592, 0.382085593004164, -57.7937837837838]);
        correct.push([1.88495559215388, 0.382085593004164, -22.6554054054053]);
        correct.push([2.51327412287183, 0.382085593004164, 43.69972972973]);
        correct.push([3.14159265358979, 0.382085593004164, 1.54000000000006]);
        correct.push([-3.14159265358979, 0.466993502560644, -4.12648648648647]);
        correct.push([-2.51327412287183, 0.466993502560644, -19.4737837837838]);
        correct.push([-1.88495559215388, 0.466993502560644, -27.7921621621622]);
        correct.push([-1.25663706143592, 0.466993502560644, -49.98]);
        correct.push([-0.628318530717959, 0.466993502560644, 12.9999999999999]);
        correct.push([0, 0.466993502560644, 25.5967567567567]);
        correct.push([0.628318530717959, 0.466993502560644, 13.407027027027]);
        correct.push([1.25663706143592, 0.466993502560644, -44.1075675675676]);
        correct.push([1.88495559215388, 0.466993502560644, -26.58]);
        correct.push([2.51327412287183, 0.466993502560644, 34.0510810810812]);
        correct.push([3.14159265358979, 0.466993502560644, -4.12648648648646]);
        correct.push([-3.14159265358979, 0.551901412117125, -8.85108108108105]);
        correct.push([-2.51327412287183, 0.551901412117125, -25.9794594594595]);
        correct.push([-1.88495559215388, 0.551901412117125, -25.9010810810811]);
        correct.push([-1.25663706143592, 0.551901412117125, -51.5262162162162]);
        correct.push([-0.628318530717959, 0.551901412117125, 28.6043243243242]);
        correct.push([0, 0.551901412117125, 40.6908108108108]);
        correct.push([0.628318530717959, 0.551901412117125, 20.1497297297297]);
        correct.push([1.25663706143592, 0.551901412117125, -44.2483783783785]);
        correct.push([1.88495559215388, 0.551901412117125, -34.4297297297298]);
        correct.push([2.51327412287183, 0.551901412117125, 28.6005405405406]);
        correct.push([3.14159265358979, 0.551901412117125, -8.85108108108105]);
        correct.push([-3.14159265358979, 0.636809321673606, -11.6564864864864]);
        correct.push([-2.51327412287183, 0.636809321673606, -29.1213513513513]);
        correct.push([-1.88495559215388, 0.636809321673606, -21.3927027027027]);
        correct.push([-1.25663706143592, 0.636809321673606, -43.4137837837839]);
        correct.push([-0.628318530717959, 0.636809321673606, 41.3713513513513]);
        correct.push([0, 0.636809321673606, 46.1154054054055]);
        correct.push([0.628318530717959, 0.636809321673606, 26.8897297297296]);
        correct.push([1.25663706143592, 0.636809321673606, -30.6148648648649]);
        correct.push([1.88495559215388, 0.636809321673606, -33.9183783783784]);
        correct.push([2.51327412287183, 0.636809321673606, 20.1591891891893]);
        correct.push([3.14159265358979, 0.636809321673606, -11.6564864864864]);
        correct.push([-3.14159265358979, 0.721717231230087, -11.5956756756757]);
        correct.push([-2.51327412287183, 0.721717231230087, -25.0564864864865]);
        correct.push([-1.88495559215388, 0.721717231230087, -15.0386486486487]);
        correct.push([-1.25663706143592, 0.721717231230087, -31.4556756756757]);
        correct.push([-0.628318530717959, 0.721717231230087, 45.1159459459459]);
        correct.push([0, 0.721717231230087, 49.7145945945946]);
        correct.push([0.628318530717959, 0.721717231230087, 27.2886486486487]);
        correct.push([1.25663706143592, 0.721717231230087, -45.2567567567572]);
        correct.push([1.88495559215388, 0.721717231230087, -37.0751351351353]);
        correct.push([2.51327412287183, 0.721717231230087, 11.8594594594593]);
        correct.push([3.14159265358979, 0.721717231230087, -11.5956756756757]);
        correct.push([-3.14159265358979, 0.806625140786568, -4.50027027027037]);
        correct.push([-2.51327412287183, 0.806625140786568, -16.6162162162163]);
        correct.push([-1.88495559215388, 0.806625140786568, -13.8840540540541]);
        correct.push([-1.25663706143592, 0.806625140786568, -29.5664864864863]);
        correct.push([-0.628318530717959, 0.806625140786568, 49.4183783783784]);
        correct.push([0, 0.806625140786568, 48.17]);
        correct.push([0.628318530717959, 0.806625140786568, 17.8091891891891]);
        correct.push([1.25663706143592, 0.806625140786568, -42.4343243243244]);
        correct.push([1.88495559215388, 0.806625140786568, -36.121891891892]);
        correct.push([2.51327412287183, 0.806625140786568, 23.3935135135137]);
        correct.push([3.14159265358979, 0.806625140786568, -4.50027027027038]);
        correct.push([-3.14159265358979, 0.891533050343049, -6.06513513513605]);
        correct.push([-2.51327412287183, 0.891533050343049, -3.12486486486496]);
        correct.push([-1.88495559215388, 0.891533050343049, -20.0802702702702]);
        correct.push([-1.25663706143592, 0.891533050343049, -32.1021621621621]);
        correct.push([-0.628318530717959, 0.891533050343049, 53.4167567567567]);
        correct.push([0, 0.891533050343049, 45.3875675675675]);
        correct.push([0.628318530717959, 0.891533050343049, 14.2737837837838]);
        correct.push([1.25663706143592, 0.891533050343049, -33.2243243243244]);
        correct.push([1.88495559215388, 0.891533050343049, -34.4859459459459]);
        correct.push([2.51327412287183, 0.891533050343049, 18.3170270270271]);
        correct.push([3.14159265358979, 0.891533050343049, -6.06513513513602]);
        correct.push([-3.14159265358979, 0.97644095989953, 1.62594594594591]);
        correct.push([-2.51327412287183, 0.97644095989953, 6.25459459459452]);
        correct.push([-1.88495559215388, 0.97644095989953, -28.8886486486486]);
        correct.push([-1.25663706143592, 0.97644095989953, -31.3162162162162]);
        correct.push([-0.628318530717959, 0.97644095989953, 58.2737837837838]);
        correct.push([0, 0.97644095989953, 46.6951351351351]);
        correct.push([0.628318530717959, 0.97644095989953, 15.4189189189189]);
        correct.push([1.25663706143592, 0.97644095989953, -28.2686486486487]);
        correct.push([1.88495559215388, 0.97644095989953, -32.1337837837838]);
        correct.push([2.51327412287183, 0.97644095989953, 16.2089189189189]);
        correct.push([3.14159265358979, 0.97644095989953, 1.6259459459459]);
        correct.push([-3.14159265358979, 1.06134886945601, 3.92108108108088]);
        correct.push([-2.51327412287183, 1.06134886945601, 16.6989189189186]);
        correct.push([-1.88495559215388, 1.06134886945601, -32.9591891891892]);
        correct.push([-1.25663706143592, 1.06134886945601, -23.807027027027]);
        correct.push([-0.628318530717959, 1.06134886945601, 53.3678378378379]);
        correct.push([0, 1.06134886945601, 49.0640540540539]);
        correct.push([0.628318530717959, 1.06134886945601, 12.6778378378378]);
        correct.push([1.25663706143592, 1.06134886945601, -22.9124324324325]);
        correct.push([1.88495559215388, 1.06134886945601, -29.092972972973]);
        correct.push([2.51327412287183, 1.06134886945601, 13.5108108108108]);
        correct.push([3.14159265358979, 1.06134886945601, 3.92108108108087]);
        correct.push([-3.14159265358979, 1.14625677901249, 4.7981081081081]);
        correct.push([-2.51327412287183, 1.14625677901249, 9.86783783783797]);
        correct.push([-1.88495559215388, 1.14625677901249, -30.6862162162163]);
        correct.push([-1.25663706143592, 1.14625677901249, -18.3408108108108]);
        correct.push([-0.628318530717959, 1.14625677901249, 53.2686486486487]);
        correct.push([0, 1.14625677901249, 50.5086486486487]);
        correct.push([0.628318530717959, 1.14625677901249, 16.8924324324325]);
        correct.push([1.25663706143592, 1.14625677901249, -15.9475675675676]);
        correct.push([1.88495559215388, 1.14625677901249, -18.9272972972974]);
        correct.push([2.51327412287183, 1.14625677901249, 5.82189189189201]);
        correct.push([3.14159265358979, 1.14625677901249, 4.79810810810811]);
        correct.push([-3.14159265358979, 1.23116468856897, 2.2281081081081]);
        correct.push([-2.51327412287183, 1.23116468856897, -1.42054054054056]);
        correct.push([-1.88495559215388, 1.23116468856897, -26.1005405405407]);
        correct.push([-1.25663706143592, 1.23116468856897, 1.39351351351341]);
        correct.push([-0.628318530717959, 1.23116468856897, 50.5602702702703]);
        correct.push([0, 1.23116468856897, 49.3035135135135]);
        correct.push([0.628318530717959, 1.23116468856897, 14.312972972973]);
        correct.push([1.25663706143592, 1.23116468856897, -9.7181081081081]);
        correct.push([1.88495559215388, 1.23116468856897, -9.0756756756757]);
        correct.push([2.51327412287183, 1.23116468856897, -0.847837837837822]);
        correct.push([3.14159265358979, 1.23116468856897, 2.2281081081081]);
        correct.push([-3.14159265358979, 1.31607259812545, 2.10324324324322]);
        correct.push([-2.51327412287183, 1.31607259812545, -5.03891891891886]);
        correct.push([-1.88495559215388, 1.31607259812545, -12.0064864864867]);
        correct.push([-1.25663706143592, 1.31607259812545, 17.068918918919]);
        correct.push([-0.628318530717959, 1.31607259812545, 40.6305405405405]);
        correct.push([0, 1.31607259812545, 43.2456756756757]);
        correct.push([0.628318530717959, 1.31607259812545, 15.6524324324324]);
        correct.push([1.25663706143592, 1.31607259812545, -5.01351351351357]);
        correct.push([1.88495559215388, 1.31607259812545, -5.83270270270285]);
        correct.push([2.51327412287183, 1.31607259812545, 0.795675675675644]);
        correct.push([3.14159265358979, 1.31607259812545, 2.10324324324321]);
        correct.push([-3.14159265358979, 1.40098050768193, 4.06972972972977]);
        correct.push([-2.51327412287183, 1.40098050768193, -0.187027027027119]);
        correct.push([-1.88495559215388, 1.40098050768193, 4.71540540540524]);
        correct.push([-1.25663706143592, 1.40098050768193, 11.6991891891886]);
        correct.push([-0.628318530717959, 1.40098050768193, 35.4824324324325]);
        correct.push([0, 1.40098050768193, 34.2791891891892]);
        correct.push([0.628318530717959, 1.40098050768193, 21.7391891891891]);
        correct.push([1.25663706143592, 1.40098050768193, 4.40810810810796]);
        correct.push([1.88495559215388, 1.40098050768193, 0.833243243243172]);
        correct.push([2.51327412287183, 1.40098050768193, 1.85567567567566]);
        correct.push([3.14159265358979, 1.40098050768193, 4.06972972972977]);
        correct.push([-3.14159265358979, 1.48588841723841, 8.01837837837831]);
        correct.push([-2.51327412287183, 1.48588841723841, 10.2948648648648]);
        correct.push([-1.88495559215388, 1.48588841723841, 14.0286486486486]);
        correct.push([-1.25663706143592, 1.48588841723841, 19.5743243243243]);
        correct.push([-0.628318530717959, 1.48588841723841, 22.8724324324326]);
        correct.push([0, 1.48588841723841, 24.6691891891894]);
        correct.push([0.628318530717959, 1.48588841723841, 21.141081081081]);
        correct.push([1.25663706143592, 1.48588841723841, 14.512162162162]);
        correct.push([1.88495559215388, 1.48588841723841, 10.962972972973]);
        correct.push([2.51327412287183, 1.48588841723841, 9.43729729729726]);
        correct.push([3.14159265358979, 1.48588841723841, 8.0183783783783]);
        correct.push([-3.14159265358979, 1.5707963267949, 13.61]);
        correct.push([-2.51327412287183, 1.5707963267949, 13.61]);
        correct.push([-1.88495559215388, 1.5707963267949, 13.61]);
        correct.push([-1.25663706143592, 1.5707963267949, 13.61]);
        correct.push([-0.628318530717959, 1.5707963267949, 13.61]);
        correct.push([0, 1.5707963267949, 13.61]);
        correct.push([0.628318530717959, 1.5707963267949, 13.61]);
        correct.push([1.25663706143592, 1.5707963267949, 13.61]);
        correct.push([1.88495559215388, 1.5707963267949, 13.61]);
        correct.push([2.51327412287183, 1.5707963267949, 13.61]);
        correct.push([3.14159265358979, 1.5707963267949, 13.61]);

        // Note that these values are in cm, it is the HeightMapTerrainData later on that
        // converts them to meters.
        runs(function() {

            expect(MeanSeaLevelTerrainProvider._bilinearInterpolation(
                        mslProvider, 0.0, -CesiumMath.PI_OVER_TWO)).toBe(-2953);
            expect(MeanSeaLevelTerrainProvider._bilinearInterpolation(
                    mslProvider, 0.0, CesiumMath.PI_OVER_TWO)).toBe(1361);

            for (var i = 0; i < correct.length; i++) {
                var lon = correct[i][0];
                var lat = correct[i][1];
                var height = correct[i][2];
                // At this stage our results are still in cm, not meters like the 'correct' ones.
                expect(MeanSeaLevelTerrainProvider._bilinearInterpolation(
                        mslProvider, lon, lat)).toBeCloseTo(height * 100, 9);
            }
        });

    });

});
